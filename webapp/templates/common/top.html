<div class="navbar navbar-inverse navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container">
      <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="brand" href="/">Fainle's Blog</a>
      {% if 'about' in request.path %}
        {% set about_class="active" %}
      {% elif 'category' in request.path %}
        {% set category_class="active" %}    
      {% else %}
        {% set index_class="active" %}
      {% endif %}
      <div class="nav-collapse collapse">
        <ul class="nav">
          <li class="{{ index_class }}">
            <a href="/">首页</a>
          </li>
          {% if g.category%}
          <li class="dropdown {{ category_class }}">
            <a href="###" class="dropdown-toggle" data-toggle="dropdown">
              分类<b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
              {% for c in g.category %}
              <li>
                <a href="/category/{{ c.id }}">{{ c.name }}</a>
              </li>
              {% endfor %}
            </ul>
          </li>
          {% endif %}
          <li class="{{ about_class }}">
            <a href="/about/blog">关于</a>
          </li>
        </ul>
        {% if g.user.id %}
        <p class="navbar-text pull-right">
          <a href="/user/{{ g.user.id }}" class="navbar-link">{{ g.user.nickname }}</a>
          <a href="/user/logout?next={{ request.path }}" class="navbar-link">退出</a>
        </p>
        {% else %}
        <p class="navbar-text pull-right">
          <a href="/user/register" class="navbar-link">注册</a>
          <a href="/user/login" class="navbar-link">登录</a>
        </p>
        {% endif %}
      </div>
      <!--/.nav-collapse --> </div>
  </div>
</div>